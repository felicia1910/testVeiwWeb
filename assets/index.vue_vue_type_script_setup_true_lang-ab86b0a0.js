import{d as T,h as m,g as V,f as x,o as $,c as i,b as l,s as f,x as E,y as b,B as v,t as F,k as L,A as g,F as O,p as j,C as D,a as d}from"./index-27b3ebbf.js";const H=["onClick"],N=["id","readonly","disabled"],S={key:0,class:"dropdown"},z={class:"fas fa-caret-down"},A={class:"dropdown-menu"},R=["onMousedown"],U=["innerHTML"],G=T({__name:"index",props:{css:null,type:null,name:null,value:null,inputId:null,items:null,readonly:{type:Boolean}},emits:["change"],setup(s,{emit:B}){const t=s,n=m("請選擇"),u=m(""),r=V({items:[]}),y=m(!1),h=x(()=>`dropdown-foucs"-${t.inputId}`),M=x(()=>{let e=[];if(t.type=="search"){let a=n.value.split("\\").join(" ");const c=new RegExp(a,"ig");for(const p of r.items)(a.length<1||p.name.match(c))&&e.push(p)}else e=r.items;return e}),k=()=>{if(n.value=t.readonly?"":n.value,t.type=="table"&&t.name&&(n.value=t.name),t.value){let e=t.items.filter(o=>o.id==t.value);n.value=e[0]?e[0].name:n.value}r.items=t.items.map(e=>({...e,text:e.text?e.text:e.name}))},w=e=>{y.value=e,t.type=="search"&&(e?(u.value=n.value,n.value=""):n.value=u.value)},C=()=>{var e;t.readonly||(e=document.getElementById(h.value))==null||e.focus()},I=e=>{t.type!=="table"&&(n.value=e.name),u.value=e.name,B("change",e)};return $(()=>{k()}),(e,o)=>(d(),i("div",{class:v(["dropdown-box",s.css]),onClick:D(C,["stop"])},[l("div",{class:v([s.type!="table"&&"origin-drop-input",s.type=="table"&&"table-drop-input"])},[f(l("input",{id:b(h),class:v([s.type!=="table"&&"dropdown-foucs",s.type=="table"&&"dropdown-foucs-hide",s.type=="search"&&"dropdown-foucs-input"]),onFocus:o[0]||(o[0]=a=>w(!0)),onBlur:o[1]||(o[1]=a=>w(!1)),"onUpdate:modelValue":o[2]||(o[2]=a=>n.value=a),readonly:s.type!=="search",disabled:t.readonly},null,42,N),[[E,n.value]]),s.type=="table"?(d(),i("div",S,F(n.value),1)):L("",!0),f(l("i",z,null,512),[[g,!t.readonly]])],2),f(l("div",A,[(d(!0),i(O,null,j(b(M),(a,c)=>(d(),i("a",{class:"dropdown-item",href:"javascript:;",key:c,onMousedown:p=>I(a)},[l("div",{innerHTML:a.text},null,8,U)],40,R))),128))],512),[[g,y.value]])],10,H))}});export{G as _};
